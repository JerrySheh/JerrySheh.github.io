import{_ as i,c as a,f as n,o as e}from"./app-D22ydJtp.js";const l="/images/Learn_Android/monitor_error.png",p={};function t(r,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="gradle-加载慢的问题" tabindex="-1"><a class="header-anchor" href="#gradle-加载慢的问题"><span>Gradle 加载慢的问题</span></a></h1><p>第一次加载项目很慢一直显示<code>Building “XXXX” Gradle project info</code></p><p>解决办法：</p><p>打开{your project}/gradle/wrapper/gradle-wrapper.properties</p><p>查看distributionUrl中 gradle 版本</p><p>去 https://services.gradle.org/distributions/ 下载相应版本的Gradle（官网地址：https://gradle.org/install）</p><p>放到以下目录即可</p><ul><li>Linux：<code>~/.gradle/wrapper/dists</code></li><li>Windows：<code>C:\\users\\{user name}\\.gradle\\wrapper\\dists</code></li></ul><hr><h1 id="运行时权限在部分android手机上无效" tabindex="-1"><a class="header-anchor" href="#运行时权限在部分android手机上无效"><span>运行时权限在部分Android手机上无效</span></a></h1><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><p>按照 Google 文档的开发模型，写的运行时权限模型代码，在一加手机5T上，点击拒绝后没有任何提示，也就是说依然返回了有权限的STATUE_CODE，但是什么都没发生。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ContextCompat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">checkSelfPermission</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Manifest</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">permission</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">READ_CONTACTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> PackageManager</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PERMISSION_GRANTED</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 没有权限。</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ActivityCompat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">shouldShowRequestPermissionRationale</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Manifest</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">permission</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">READ_CONTACTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            // 用户拒绝过这个权限了，应该提示用户，为什么需要这个权限。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        // 申请授权。</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        ActivityCompat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">requestPermissions</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">thisActivity</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]{</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Manifest</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">permission</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">READ_CONTACTS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> MMM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Override</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> onRequestPermissionsResult</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> requestCode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> String permissions</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[],</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> grantResults</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    switch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">requestCode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        case</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> MMM</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">grantResults</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">length</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                &amp;&amp;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> grantResults</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ==</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> PackageManager</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PERMISSION_GRANTED</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                // 权限被用户同意，可以去放肆了。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                // 权限被用户拒绝了，洗洗睡吧。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="解决办法" tabindex="-1"><a class="header-anchor" href="#解决办法"><span>解决办法</span></a></h2><p>很多国产ROM都有这个坑。因此不要用上面的开发模型，推荐开源库：AndPermission</p><p>项目地址： https://github.com/yanzhenjie/AndPermission</p><p>使用方法可参考：<a href="http://blog.csdn.net/yanzhenjie1003/article/details/52503533/" target="_blank" rel="noopener noreferrer">Android 6.0 运行时权限管理最佳实践</a></p><hr><h1 id="android-device-monitor-打不开的问题" tabindex="-1"><a class="header-anchor" href="#android-device-monitor-打不开的问题"><span>Android Device Monitor 打不开的问题</span></a></h1><p><img src="`+l+`" alt=""></p><p>查看Log：C:\\Users\\Jerrysheh\\AppData\\Local\\Android\\Sdk\\tools\\lib\\monitor-x86_64\\configuration\\1520661867795.log</p><p>关键报错</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.224</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.apache.ant_1.8.3.v201301120609/@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.255</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.apache.jasper.glassfish_2.2.2.v201205150955.jar@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.255</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.apache.lucene.core_2.9.1.v201101211721.jar@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.458</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.eclipse.help.base_3.6.101.v201302041200.jar@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.474</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.eclipse.help.ui_3.5.201.v20130108-092756.jar@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.474</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.eclipse.help.webapp_3.6.101.v20130116-182509.jar@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.474</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.eclipse.jetty.server_8.1.3.v20120522.jar@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!ENTRY org.eclipse.osgi 4 0 2018-03-10 14:04:28.521</span></span>
<span class="line"><span>!MESSAGE Bundle reference:file:org.eclipse.ui.intro_3.4.200.v20120521-2344.jar@4 not found.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).</span></span>
<span class="line"><span>	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)</span></span>
<span class="line"><span>	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)</span></span>
<span class="line"><span>	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)</span></span>
<span class="line"><span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span></span>
<span class="line"><span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</span></span>
<span class="line"><span>	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</span></span>
<span class="line"><span>	at java.base/java.lang.reflect.Method.invoke(Unknown Source)</span></span>
<span class="line"><span>	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)</span></span>
<span class="line"><span>	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)</span></span>
<span class="line"><span>	at org.eclipse.equinox.launcher.Main.run(Main.java:1438)</span></span>
<span class="line"><span>	at org.eclipse.equinox.launcher.Main.main(Main.java:1414)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="解决办法-1" tabindex="-1"><a class="header-anchor" href="#解决办法-1"><span>解决办法</span></a></h2><p>卸载 JRE 9。 （JDK 9 可以不用卸载） ， 然后装 JDK 8 。</p><p>然后启动 Android Studio 时，使用管理员权限打开。</p>`,26)]))}const d=i(p,[["render",t],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/article/wd558n6a/","title":"Android开发中的一些坑","lang":"zh-CN","frontmatter":{"title":"Android开发中的一些坑","comments":true,"categories":"Android","tags":["Android"],"abbrlink":"cc537ae4","createTime":"2018/03/10 14:06:25","permalink":"/article/wd558n6a/","description":"Gradle 加载慢的问题 第一次加载项目很慢一直显示Building “XXXX” Gradle project info 解决办法： 打开{your project}/gradle/wrapper/gradle-wrapper.properties 查看distributionUrl中 gradle 版本 去 https://services.gr...","head":[["meta",{"property":"og:url","content":"https://jerrysheh.com/article/wd558n6a/"}],["meta",{"property":"og:site_name","content":"Jerry"}],["meta",{"property":"og:title","content":"Android开发中的一些坑"}],["meta",{"property":"og:description","content":"Gradle 加载慢的问题 第一次加载项目很慢一直显示Building “XXXX” Gradle project info 解决办法： 打开{your project}/gradle/wrapper/gradle-wrapper.properties 查看distributionUrl中 gradle 版本 去 https://services.gr..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://jerrysheh.com/images/Learn_Android/monitor_error.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-20T05:02:32.000Z"}],["meta",{"property":"article:tag","content":"Android"}],["meta",{"property":"article:modified_time","content":"2024-10-20T05:02:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Android开发中的一些坑\\",\\"image\\":[\\"https://jerrysheh.com/images/Learn_Android/monitor_error.png\\"],\\"dateModified\\":\\"2024-10-20T05:02:32.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"问题","slug":"问题","link":"#问题","children":[]},{"level":2,"title":"解决办法","slug":"解决办法","link":"#解决办法","children":[]},{"level":2,"title":"解决办法","slug":"解决办法-1","link":"#解决办法-1","children":[]}],"readingTime":{"minutes":2.03,"words":609},"git":{"createdTime":1729400552000,"updatedTime":1729400552000,"contributors":[{"name":"jerrysheh","email":"jerrysheh@gmail.com","commits":1}]},"autoDesc":true,"filePathRelative":"posts/android/Android开发中的一些坑.md","categoryList":[{"id":"18958e","sort":10000,"name":"posts"},{"id":"ce0f17","sort":10014,"name":"android"}]}');export{d as comp,k as data};
