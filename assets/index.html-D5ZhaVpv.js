import{_ as e,c as r,f as n,o as i}from"./app-D22ydJtp.js";const d={};function o(a,t){return i(),r("div",null,t[0]||(t[0]=[n('<p>好久没写博客了。感觉最近有点懒了。重新拾起《计算机网络——自顶向下方法》看看，这一篇聊聊网络层。</p><hr><h2 id="简述" tabindex="-1"><a class="header-anchor" href="#简述"><span>简述</span></a></h2><p>网络层的作用即是将分组从一台主机移动到另一台主机。<strong>转发</strong> 和 <strong>路由选择</strong> 共同完成这项工作。除此之外，网络层还有 <strong>连接建立(connection setup)</strong> 的功能。</p><h3 id="转发-forwarding" tabindex="-1"><a class="header-anchor" href="#转发-forwarding"><span>转发（forwarding）</span></a></h3><p>转发指的是分组在单一的路由器从一条<strong>入链路</strong>到<strong>出链路</strong>的传送。</p><h3 id="路由选择-routing" tabindex="-1"><a class="header-anchor" href="#路由选择-routing"><span>路由选择（routing）</span></a></h3><p>路由选择涉及一个网络中的所有路由器，它们经由选择协议共同交互，决定分组从源到目的地所采用的路径。计算这些路径采用了 <strong>路由选择算法（routing algorithm）</strong>。</p><h3 id="分组交换机" tabindex="-1"><a class="header-anchor" href="#分组交换机"><span>分组交换机</span></a></h3><p>分组交换机（packet switch）是一个通用概念，指的是能根据分组首部字段的值，从 输入链路接口 转移分组 到 输出链路接口 的交换设备。</p><p>分组交换机包括两种：</p><ul><li>在数据链路层，基于链路层字段中的值做转发决定的称为 <strong>链路层交换机(link-layer switches)</strong></li><li>在网络层，基于网络层字段中的值做转发决定的称为 <strong>路由器(router)</strong></li></ul><hr><h2 id="虚电路和数据报网络" tabindex="-1"><a class="header-anchor" href="#虚电路和数据报网络"><span>虚电路和数据报网络</span></a></h2><p>类似于运输层能够提供面向连接的服务（TCP）或者无连接的服务（UDP），网络层也能提供 带连接的服务 或 无连接服务。</p><p>网络层中的连接服务称为 <strong>虚电路(Virtual-Circuit, VC)</strong>，无连接服务称为 <strong>数据报(datagram)</strong>。</p><p>值得注意的是，网络层并不同时提供这两种服务，在一个计算机网络中，仅提供其一。我们所熟悉的 Internet，属于数据报网络，但在一些其他的网络体系结构（ATM、帧中继等）属于虚电路网络。</p><p>此外，跟运输层在端系统与端系统间实现TCP连接不同，网络层的连接服务除了在端系统之间，也存在于网络核心的路由器。</p><h3 id="虚电路网络" tabindex="-1"><a class="header-anchor" href="#虚电路网络"><span>虚电路网络</span></a></h3><p>一条虚电路的组成如下：</p><ul><li>源和目的主机之间的路径（一系列链路和路由器）</li><li>沿着该路径的每段链路的号码（称为VC号）</li><li>沿着该路径的每台路由器中的转发表表项</li></ul><p>虚电路的三个阶段：</p><ul><li><strong>虚电路建立</strong>：发送运输层指定接收方地址，网络层决定发送方与接受方的路径，并为每条链路决定一个VC号，最后为该路径的每台路由器增加一个表项。</li><li><strong>数据传送</strong></li><li><strong>虚电路拆除</strong></li></ul><h3 id="数据报网络" tabindex="-1"><a class="header-anchor" href="#数据报网络"><span>数据报网络</span></a></h3><p>当一个端系统要发送分组时，就会为该分组加上<strong>目的地址</strong>，然后将分组推进网络，这样每一个分组就称为数据报。</p><p>网络中的每一台路由器，都根据转发表，为目的地址查找适当的输出链路，然后对这个分组进行转发。</p><p>路由器会将目的地址的前缀与转发表表项进行匹配，当有多个匹配项时，采用 <strong>最长前缀匹配规则</strong> 来最终选择。</p><hr><h2 id="ip协议" tabindex="-1"><a class="header-anchor" href="#ip协议"><span>ip协议</span></a></h2><p>ip协议是网络层最著名的协议，它定义了数据报的格式和编址规则。在网络的世界中，每一台设备都拥有一个ip地址，ip协议就是将一个ip地址的数据发送到另外一个ip地址所代表的设备。</p><p>ip协议有两个大版本，分别是 ipv4 和 ipv6 。因为历史原因，ipv4目前仍是主流。</p><h3 id="ipv4编址规则" tabindex="-1"><a class="header-anchor" href="#ipv4编址规则"><span>ipv4编址规则</span></a></h3><p>ipv4包含32位，一般采用 点分十进制记法 。例如 <code>193.32.216.9</code>，实际上就是 <code>11000001 00100000 11011000 00001001</code>, 每一个点代表8位二进制数的十进制写法。</p><table><thead><tr><th>193</th><th>32</th><th>216</th><th>9</th></tr></thead><tbody><tr><td>11000001</td><td>00100000</td><td>11011000</td><td>00001001</td></tr></tbody></table><h3 id="子网掩码" tabindex="-1"><a class="header-anchor" href="#子网掩码"><span>子网掩码</span></a></h3><p>有时候我们可以看到，由一个路由器和几台主机构成的网络中有相同的前缀，例如 <code>223.1.1.1</code>、<code>223.1.1.2</code>、<code>223.1.1.3</code>，它们都有相同的前24位比特 <code>223.1.1.x</code> ，我们称这是一个子网。为了方便记下这个子网所代表的网络，通常写作 <code>223.1.1.0/24</code>，称为子网掩码。 <code>/24</code> 的意思是，这个子网有相同的前24位，只有最后8位是不同的，因此也很容易看出，这个子网最多能有 256 个ip地址（<code>00000000-11111111</code>），但是在网络中全0和全1通常作为保留地址不用，所以实际可用的只有 254 个。</p><p>常见的子网对应的ip地址数量如下：</p><table><thead><tr><th>掩码</th><th>可用位数</th><th>可用ip地址数量</th></tr></thead><tbody><tr><td>/22</td><td>6</td><td>1024-2</td></tr><tr><td>/23</td><td>7</td><td>512-2</td></tr><tr><td>/24</td><td>8</td><td>256-2</td></tr><tr><td>/25</td><td>7</td><td>128-2</td></tr><tr><td>/26</td><td>6</td><td>64-2</td></tr><tr><td>/27</td><td>5</td><td>32-2</td></tr><tr><td>/28</td><td>4</td><td>16-2</td></tr></tbody></table><h4 id="扩展知识" tabindex="-1"><a class="header-anchor" href="#扩展知识"><span>扩展知识</span></a></h4><p>C类IP地址的默认子网掩码为24位，即 <code>255.255.255.0</code>，这时候每个子网有256个IP地址，254个可用。</p><p>有时候我们会看到 <code>/22</code> 的掩码，什么意思呢？ <code>/22</code> 即 <code>255.255.252.0</code>，网络位缩短了2位，2位二进制可以容纳 4 个数字，相当于4个C类子网汇聚成了一个较大的子网。</p><blockquote><p><code>255.255.255.0</code> 转换为二进制为 <code>11111111 11111111 11111111 00000000</code><code>255.255.252.0</code> 转换为二进制为 <code>11111111 11111111 11111100 00000000</code></p></blockquote>',42)]))}const l=e(d,[["render",o],["__file","index.html.vue"]]),s=JSON.parse('{"path":"/networking/x8i1v6xq/","title":"计算机网络——网络层探究","lang":"zh-CN","frontmatter":{"title":"计算机网络——网络层探究","comments":true,"categories":"计算机网络","tags":["计算机网络"],"abbrlink":"69f0eb47","createTime":"2018/05/28 23:04:48","permalink":"/networking/x8i1v6xq/","description":"好久没写博客了。感觉最近有点懒了。重新拾起《计算机网络——自顶向下方法》看看，这一篇聊聊网络层。 简述 网络层的作用即是将分组从一台主机移动到另一台主机。转发 和 路由选择 共同完成这项工作。除此之外，网络层还有 连接建立(connection setup) 的功能。 转发（forwarding） 转发指的是分组在单一的路由器从一条入链路到出链路的传送...","head":[["meta",{"property":"og:url","content":"https://jerrysheh.com/networking/x8i1v6xq/"}],["meta",{"property":"og:site_name","content":"Jerry"}],["meta",{"property":"og:title","content":"计算机网络——网络层探究"}],["meta",{"property":"og:description","content":"好久没写博客了。感觉最近有点懒了。重新拾起《计算机网络——自顶向下方法》看看，这一篇聊聊网络层。 简述 网络层的作用即是将分组从一台主机移动到另一台主机。转发 和 路由选择 共同完成这项工作。除此之外，网络层还有 连接建立(connection setup) 的功能。 转发（forwarding） 转发指的是分组在单一的路由器从一条入链路到出链路的传送..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-20T05:02:32.000Z"}],["meta",{"property":"article:tag","content":"计算机网络"}],["meta",{"property":"article:modified_time","content":"2024-10-20T05:02:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"计算机网络——网络层探究\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-20T05:02:32.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"简述","slug":"简述","link":"#简述","children":[{"level":3,"title":"转发（forwarding）","slug":"转发-forwarding","link":"#转发-forwarding","children":[]},{"level":3,"title":"路由选择（routing）","slug":"路由选择-routing","link":"#路由选择-routing","children":[]},{"level":3,"title":"分组交换机","slug":"分组交换机","link":"#分组交换机","children":[]}]},{"level":2,"title":"虚电路和数据报网络","slug":"虚电路和数据报网络","link":"#虚电路和数据报网络","children":[{"level":3,"title":"虚电路网络","slug":"虚电路网络","link":"#虚电路网络","children":[]},{"level":3,"title":"数据报网络","slug":"数据报网络","link":"#数据报网络","children":[]}]},{"level":2,"title":"ip协议","slug":"ip协议","link":"#ip协议","children":[{"level":3,"title":"ipv4编址规则","slug":"ipv4编址规则","link":"#ipv4编址规则","children":[]},{"level":3,"title":"子网掩码","slug":"子网掩码","link":"#子网掩码","children":[]}]}],"readingTime":{"minutes":4.55,"words":1365},"git":{"createdTime":1729400552000,"updatedTime":1729400552000,"contributors":[{"name":"jerrysheh","email":"jerrysheh@gmail.com","commits":1}]},"autoDesc":true,"filePathRelative":"notes/networking/3.计算机网络——网络层探究.md"}');export{l as comp,s as data};
