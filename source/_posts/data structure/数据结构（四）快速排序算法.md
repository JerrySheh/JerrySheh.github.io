---
title: 数据结构（四）快速排序算法
categories: 数据结构和算法
tags: 数据结构和算法
abbrlink: a4803490
date: 2017-12-08 23:21:57
---

# 快速排序简介

在归并排序中，我们将一个数组分为两半，每一半又再分为两半，分到最后再一步步归并。

快速排序和归并排序是互补的：快速排序先选定一个元素，比这个元素小的放在左边，比这个元素大的放在右边，每一半，也都选一个元素，比它小的放左边，比它大的放右边。不断地选、分下去。

<!-- more -->

---

# 如何切分

假设我们选取数组的第一个元素为切分（partition）元素，如何把小于它的元素放在左边，大于它的元素放在右边呢？

1. 选取第一个元素 `arr[low]` 为参考元素
2. 从左边向右，每一个元素都跟参考元素做比较，直到找到比参考元素大的
3. 从右边向左，每一个元素都跟参考元素做比较，直到找到比参考元素小的
4. 交换第 2，3 步 的两个元素（也就是把大的放右边、小的放左边）
5. 重复 2、3、4，直到扫描完
6. 将参考元素`arr[low]`放到中间位置

```java
private static int partition(int[] arr, int low, int high) {
        // 1.选取第一个元素为参考元素
        int refer = arr[low];

        int left = low;
        int right = high + 1 ; // 这里要加一

        // 重复 2.3.4
        while (true){

            // 2.从左边向右，每一个元素都跟参考元素做比较，直到找到比参考元素大的
            while ( arr[++left] < refer ){
                // 如果到达最右了，不再向右
                if (left == high) break;
            }

            // 3.从右边向左，每一个元素都跟参考元素做比较，直到找到比参考元素小的
            while ( arr[--right] > refer ){
                // 如果到达最左了，不再向左
                if (right == low) break;
            }

            // 5. 检查是否扫描完
            if (left >= right) break;

            // 4. 交换刚刚两个元素
            Swap.swap(arr, left, right);

        }

        // 6. 将参考元素`arr[low]`放到中间位置
        Swap.swap(arr, low, right);
        return right;
    }
```



---

# 算法2.5 快速排序


1. 先切分，再排序左半边，排序右半边
2. 排序左半边的时候，又会切分，排序左半边右半边，排序右半边的时候，也会切分，排序左半边右半边
3. 递归下去

```java
package sort;

import Jutils.Swap;

import java.util.Arrays;

/**
 * 快速排序
 *
 * 思路：先选定一个元素，比这个元素小的放在左边，比这个元素大的放在右边
 *       挑出来的每一半，也都选一个元素，比它小的放左边，比它大的放右边。
 *       不断地选、分下去。
 */

public class QuickSort {

    public static void quickSort(int[] arr, int low, int high){

        if (high <= low) return;

        // 切分，refer 是参考元素
        int refer = partition(arr, low, high);

        // 将切分的左半部分快排
        quickSort(arr, low, refer - 1);

        // 将切分的右半部分快排
        quickSort(arr, refer + 1, high);
    }

    public static void main(String[] args) {
        int[] testArr = {3,7,4,8,0,1};
        System.out.println(Arrays.toString(testArr));

       quickSort(testArr, 0, 5);

        System.out.println(Arrays.toString(testArr));
    }

}

```
